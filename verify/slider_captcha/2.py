from urllib.parse import urlparse, parse_qs


def url_to_params(url):
    """
    将 URL 中的查询参数转换为字典
    示例输入: "https://example.com?name=John&age=30"
    示例输出: {'name': 'John', 'age': '30'}
    """
    parsed_url = urlparse(url)
    params = parse_qs(parsed_url.query)

    # 处理参数值为列表的情况（例如多个同名参数）
    simplified_params = {}
    for key, value in params.items():
        simplified_params[key] = value[-1]  # 取最后一个值（覆盖重复参数）

    return simplified_params


# 示例用法
url = 'https://h5api.m.tmall.com/h5/mtop.taobao.pcdetail.data.get/1.0/_____tmd_____/newslidevalidate?token=6b5080c0d01a1e01d7d86bb740efcf18&appKey=X82Y__d366b44467147323c70b42d8a2d852f5&ua=231!KqGTQ%2BmUG1S%2BjDMEdA77mu4jUGcflZPH2JcWe93GNR7YtkFQYcnLWGbccI1azYEqEMPdbrMq6YNzMZKzv8D2aopwLQRUppXN9%2FthtlPJ9JFTIL2cNXWbxl99wAHETK%2F1Z%2FGAJ6jR%2F7BK5CFccvYWXvJ7U13%2BJzoCegmzSyatE3n0tfFiw5lQ91mo3TThiwoJuz1d2QG8AY7b%2FprENC%2BdFmZlG467rUKhPIvSFBT51pLFafIlxC3GtyAr%2B%2Fnep4Dqk%2BI9xGdFNt%2FlPglCok%2B%2B%2B4mWYi%2B%2B6byP3Lq3wfGDj%2BMGMsMUJwZlv7NubwF4XDzpXyeOwzKKczGOHTwQwW6uYuxUxWBycQfR53j3b8L5GegyQTNDOE263UTNKA6ADQUUKp%2Bo7DsNJBSbFKFmSOzytOVF%2F3qPeUy6TF3vZ0bn3lglRwMrpY1zRKP6SyH2yScRD3UW8kYbvoSGaDCd7RKUUhJhaRhg7eD17z0NlAAMOSy04GItZQPxMGoaT9tqVkFsgJ%2BVNUFDkHB92xg1RSXS184VpFQ2Rz1Hz%2F%2FkGWhBhqNPnPLcdDfAHNqCWcpW5MIzBCzePjk5UXuRJWtTeeJ2ykYPBnjKrao5YToLmsHnUEjDl%2FP6r17f%2BAWa03H5DiKLQPPxnuws651Dau6U4rybDZhmUqVWBY8KI2sU%2B83kTz%2BuzO5DodFEzsACePrvxQGC8VgTkK84kgj87e%2BUFPrcqpiVDo7HRQ%2F%2B%2BCq%2BeHT1p9akZwEC3%2FK1pgCGih3nqKjyRHdkivdZfuDCxQw0WeLnfW3X0QREf4MDTgFvxgmPIj0oFszcQGlyV1Z5nlI%2FsJmVAYkSnDXUMa%2BwIqPclL%2BLiDx8kbmXIsMkokzb5WDj2L1xZCIi%2BAy4zb3H1QkZ9UfZUc9OJzilZcphbOmonsLxkkd2IIDzILZk9I0tohEljMp2to3uFLmGSCuXU3k6kl%2F0h%2F8p1wfBnalUf5VQbPave2AfpwfUlOGIH7KQny1ZUTb7pU%2F4caIv%2FRO2pGxdqQftN3d3Q2vowOSayTxp1PxH7a1bByuiAIMj1jCOBavf62kfdN7tf%2FEzBO2y0F6FPqFQI6vjjhYBJsYQALJ9xr6%2F7a0QMhhCv0J4PUWjxxHDTOEeub4P21VqkiDgmnBpxsiGNJvUUKtg8NsG31Vp%2Bg1echrUiJDRZcxfGv31UuhZyGSF9xfEMLWucMpjehET%2BUNd6tDncvsAKaQdufM7cMhxtVXX%2FCWrqzyPBYDgF8k%2BUWkErT%2FKd6yFxlqnP7nqIWgegCCZYtYuFGtFq2MCQWT9g8Gff%2FPGveNxetNQ4UiOqewp9O1K6FUjP4U1VdSad1YCoIyKK4yXEkrgDg8H%2F2k5pwwZ20cWBZYjue40cePZHuy67zZ4AUpDdgXKVDtNDqgCekb%2BKsFQuC%2FeyF6wuPyn9szHgMEgW5wB%2BPtAJer5paCwYGKO0YusTNjBJhJtt2APD5iq1i4fXc%2BjRyi2PpYolU7uT0dm7rdf6d%2Bd%2B%2Fi%2BzBf%2B1PY4TmIyGrXrHhBknH5uLE0tEcemBsQSZ4g0ZhkW%2Bp0cMHW%2FnjZi%2B5KhCVfmho4PCeGfg%2B27V01YGfuoxryKgKcSK%2BA1%2FmzSbH14HqUceHQghXvkxi%2Bh0qekLL9p%2FwkVw%2Fk0wDfZUZbq8fzvqozWD0%2F5LX1ODTOLB1izqyd0VPuiO3hTu6vXZKmk2pSDwerGz0qfXji%2BYJ1k7lo%2BO31nRF%2BtlU8WYS4C%2B9X6ZShH6d6BWk9DfH5pMReWodgEO9eS2p7gWzwzXn%2FTM0qa8UhEMnNLopjldWgaBopC00UBKEEa2xSboiYDv7YB3obGHzgOe6YlpVeXKuGWvNL5jomlXKJvem2wpeoBDZAlYSFnFMBBBz7SHF%2Fgo%2F9lLrly2%2BvxGb3wHxnfGpl3LqGShzOQxWZPGbvi3Paz8ss0RT5GypbByMT5ToEidZQ6JwW2fnjLx%2BATFv5GPQS1J77Hppwy1zXDgzX5S6CMy03CdnFK%2FNIyEi3mi3I5zrIr1hqc4D86NTEDg443pM%2BajGYTn%2FWW1KPTi%2B1T7TDDJ7x0I8WqXykq4GZQhlNpI2YyZ8%2FZ0u2sQ1g%2Bb7i5W9uZxPVBRhvinQlhF9xc5qdBG5%2BwJxrV5wSF84rW%2F3wJ0y0cBt2oF%2F4E5MKbNL%2FP0YJcqcRmO4yYXHX1C27L0keVG%2B67fO3TGRx8LtAMXnTb10nu%2BspxYgVUtwAyg3Ej7MZ2vf%2BRvBuyxE0XfIEY1uD%2FUuU8shYuxrO%2Bh%2FrSZJCl7%2FAUhSr0C0l3Vkgsn3Ibx5YmQYAGnCnKNDwQ33Fhd0vtgk2FZaAHoYDokxeVzwHFwwiMPSURgO3MG4R2drFzS1pqN8XydXaNj%2BVR0gTOU2eeOrS95ieXBrJGpKidzK%2BwXdNsMGq63ltWy7fjbyvvbWzJj9fhNHrYLqD6ZPATy8I6sXHzWOPrBu%2Bg1l0JQK1%2BfPoQldpdpnmAccpocmzd5i70PJXrGLJSY3UKDqBeKFSnXuG1asrYs3Ultnar3WJPReLHxOWKNi0SlWkP0GYLAeo43Tt3yepYq5Yzv1HEbhcqFqcggZCkv15MZmGZUvh%2FM6VUuxDFqfEDDMW3BSoQytKipt1DEEWnTskc%2BZf1s%2BojNjmvg7aQkpRlX4B%2B%2ByUY0LANJE2BvaiK3CpXgZwiTbsVlgX7wu7LFs%2FNvlzDofeTx0D3kOdyFtXCP9r5gX3OrJB95zYYnBRGEfgDseqjfUGoYdoEydya027MA2G2faQ2odHwvhrlGzdIK26Gq%2Ff%2BhERspswWWIgMZg5S1hfFoH%2BH%2BVPUniEi2Oe3QBOkKzqPiIuaYi18JPpOuZxlDFGxwYcXwGkiiSxVDEEk2SKVoR7SekrSShZR0h6OGQy8Uz44uW4okqaNQJmtFzIEkonDBxob34ShQrtDbzcw8fYC5jYve3QxYibqUv%2BC%2B5giQprAJnEZBhFrbvNOIODGF6Sh7lSBsnT2d%2Fp%2Becks7zY73X%2BpO2LcXyxHLCamUtTKjcdySPDC4m3Fr4RRe4y0aPwUjDGtclpr8lMEsypIARE9CrV6YDjbI58LnMScHMObG%2BDu9QYCdsiM%2FDoc4Ze0dt0e5qoRyYg1w0KiuUKCFogkCzIgT6lwOrF1n5yN5oEekPyMByYrJyGKSV832MXwhK4aQ%2FvHKbrRsy2yVIUWOeFTFnjEa6cCs3MSQwGepM8KZC1kLfx5OITJa%2B%3D%3D&umidToken=T2gAj31W20L9YWV373oUJsX1yLxCXvypG3W8Yy47SkguHMm8kOJi8CTFYv3rP_ID4GA%3D&encryptToken=BrsHT94sb-0-9iiPdaRO23oDsClzDa4cxPkAcpi8D6lxP3_X8oOnjdsoCWLtTtXh3hTEwti5QxaYzotqZQnWxZi-isYWF-6co8378Dl9vTqVPjODf2q-wjyPggYuQgF2ZmAgkONaV0brT6CoU2X-8kMIeIqlPwuSi193-mmKwrotsr2Q-K5lBNSvqZDOuOdscYA2n0_sv0hQFKZqaYJBVdw09W6uBVjyz34-FBbe8bDFJE7c0h0sILuxb8AA2kXnW_nm0NfW2-2zcCscAy6NMMUkTtzSHSwgu7FvwADaRedNhj1gAqEL3Ye3t5C5slW7Nh8XE7cQ_yq_0irfz_zSpZFiWKo4Dvadg04wMCvCMRs_soYkiU4hWCcjsYYfHf07Icde3PSDfWtvEldCmHltu3x2-GBHY3VdNcTNqgUe8OwNuf0QGusE9KRBmUhd2VF-ZNYSr5Pzc7dpyCMvK456njP_-EAuAfvydqUqv7HT6gq0jULsCpyWgZ8S_o_RsIAz&x5secdata=xd4160a0cb2ded97246b5080c0d01a1e01d7d86bb740efcf181742114527a-717315356a683744249abaac3en2219453037520kcapslidev2__bx__h5api.m.tmall.com%3A443%2Fh5%2Fmtop.taobao.pcdetail.data.get%2F1.0&time=4350&width=272&per=0.49&ppt=0&v=01281872653766063'

params = url_to_params(url)
print(params)  # 输出: {'name': ['John'], 'age': ['30'], 'skill': ['Python', 'Java']}
